{"ast":null,"code":"import _regeneratorRuntime from\"/home/circleci/project/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/circleci/project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/circleci/project/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{getData}from\"./service/api\";import{mapData}from\"./service/helpers\";import getComponent from'./components';import Spinner from\"../spinner/Spinner\";var DataTable=function DataTable(_ref){var tableData=_ref.tableData;var apiEndpoint=tableData.apiEndpoint,columns=tableData.columns;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return getData(apiEndpoint);case 4:response=_context.sent;setData(response);setLoading(false);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setLoading(false);console.error(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[apiEndpoint]);return/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,columns.map(function(column){return/*#__PURE__*/React.createElement(\"th\",{key:column.key},column.title);}))),/*#__PURE__*/React.createElement(\"tbody\",null,data.map(function(item,index){var cells=mapData(columns,item);return/*#__PURE__*/React.createElement(\"tr\",{key:index},cells.map(function(cell,ind){var Component=getComponent(cell.elem||'');return/*#__PURE__*/React.createElement(\"td\",{key:ind},/*#__PURE__*/React.createElement(Component,{value:cell.value}));}));}))),isLoading&&/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center p-5\"},\" \",/*#__PURE__*/React.createElement(Spinner,null),\" \")));};DataTable.displayName='DataTable';export default DataTable;","map":{"version":3,"sources":["/home/circleci/project/src/components/data-table/DataTable.tsx"],"names":["React","useState","useEffect","getData","mapData","getComponent","Spinner","DataTable","tableData","apiEndpoint","columns","isLoading","setLoading","data","setData","fetchData","response","console","error","map","column","key","title","item","index","cells","cell","ind","Component","elem","value","displayName"],"mappings":"wTAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,OAAR,KAAsB,eAAtB,CACA,OAAQC,OAAR,KAAkC,mBAAlC,CACA,MAAOC,CAAAA,YAAP,KAAyB,cAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CAOA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAwB,IAAtBC,CAAAA,SAAsB,MAAtBA,SAAsB,IAC/BC,CAAAA,WAD+B,CACPD,SADO,CAC/BC,WAD+B,CAClBC,OADkB,CACPF,SADO,CAClBE,OADkB,eAENT,QAAQ,CAAC,KAAD,CAFF,wCAE/BU,SAF+B,eAEpBC,UAFoB,8BAGdX,QAAQ,CAAC,EAAD,CAHM,yCAG/BY,IAH+B,eAGzBC,OAHyB,eAMtCZ,SAAS,CAAC,UAAM,CACZ,GAAMa,CAAAA,SAAS,2FAAG,gKAEVH,UAAU,CAAC,IAAD,CAAV,CAFU,sBAIaT,CAAAA,OAAO,CAACM,WAAD,CAJpB,QAIJO,QAJI,eAMVF,OAAO,CAACE,QAAD,CAAP,CACAJ,UAAU,CAAC,KAAD,CAAV,CAPU,+EASVA,UAAU,CAAC,KAAD,CAAV,CACAK,OAAO,CAACC,KAAR,cAVU,oEAAH,kBAATH,CAAAA,SAAS,2CAAf,CAcAA,SAAS,GACZ,CAhBQ,CAgBN,CAACN,WAAD,CAhBM,CAAT,CAkBA,mBAAQ,2BAAK,SAAS,CAAC,MAAf,eACJ,2BAAK,SAAS,CAAC,WAAf,eACI,6BAAO,SAAS,CAAC,OAAjB,eACI,6BAAO,SAAS,CAAC,YAAjB,eACA,8BACKC,OAAO,CAACS,GAAR,CAAY,SAACC,MAAD,CAAwB,CACjC,mBAAQ,0BAAI,GAAG,CAAEA,MAAM,CAACC,GAAhB,EAAsBD,MAAM,CAACE,KAA7B,CAAR,CACH,CAFA,CADL,CADA,CADJ,cASI,iCACCT,IAAI,CAACM,GAAL,CAAS,SAACI,IAAD,CAAYC,KAAZ,CAA8B,CACpC,GAAMC,CAAAA,KAAK,CAAGrB,OAAO,CAACM,OAAD,CAAUa,IAAV,CAArB,CAEA,mBAAQ,0BAAI,GAAG,CAAEC,KAAT,EACFC,KAAK,CAACN,GAAN,CAAU,SAACO,IAAD,CAAmBC,GAAnB,CAAmC,CAC3C,GAAMC,CAAAA,SAAS,CAAGvB,YAAY,CAACqB,IAAI,CAACG,IAAL,EAAa,EAAd,CAA9B,CAEA,mBAAQ,0BAAI,GAAG,CAAEF,GAAT,eAAc,oBAAC,SAAD,EAAW,KAAK,CAAED,IAAI,CAACI,KAAvB,EAAd,CAAR,CACH,CAJC,CADE,CAAR,CAOH,CAVA,CADD,CATJ,CADJ,CAyBMnB,SAAS,eAAG,2BAAK,SAAS,CAAC,mCAAf,mBAAoD,oBAAC,OAAD,MAApD,KAzBlB,CADI,CAAR,CA6BH,CArDD,CAuDAJ,SAAS,CAACwB,WAAV,CAAwB,WAAxB,CAEA,cAAexB,CAAAA,SAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {getData} from \"./service/api\";\nimport {mapData, MappedItem} from \"./service/helpers\";\nimport getComponent from './components'\nimport Spinner from \"../spinner/Spinner\";\nimport {TableType, ColumnType} from \"../../types/page\";\n\ntype Props = {\n    tableData: TableType\n}\n\nconst DataTable = ({tableData}: Props) => {\n    const {apiEndpoint, columns} = tableData;\n    const [isLoading, setLoading] = useState(false);\n    const [data, setData] = useState([]);\n\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                setLoading(true);\n\n                const response = await getData(apiEndpoint);\n\n                setData(response);\n                setLoading(false);\n            } catch (e) {\n                setLoading(false);\n                console.error(e)\n            }\n        };\n\n        fetchData();\n    }, [apiEndpoint]);\n\n    return (<div className='card'>\n        <div className='card-body'>\n            <table className='table'>\n                <thead className='thead-dark'>\n                <tr>\n                    {columns.map((column: ColumnType) => {\n                        return (<th key={column.key}>{column.title}</th>);\n                    })}\n                </tr>\n                </thead>\n\n                <tbody>\n                {data.map((item: any, index: number) => {\n                    const cells = mapData(columns, item);\n\n                    return (<tr key={index}>\n                        { cells.map((cell: MappedItem, ind: number) => {\n                            const Component = getComponent(cell.elem || '');\n\n                            return (<td key={ind}><Component value={cell.value} /></td>)\n                        })}\n                    </tr>);\n                })}\n                </tbody>\n\n            </table>\n            { isLoading &&<div className='d-flex justify-content-center p-5'> <Spinner/> </div> }\n        </div>\n    </div>);\n};\n\nDataTable.displayName = 'DataTable';\n\nexport default DataTable;\n"]},"metadata":{},"sourceType":"module"}